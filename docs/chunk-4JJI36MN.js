import{a as ce,b as de,c as ue,d as fe,e as be,f as _,j as J,k as Ae,l as xe}from"./chunk-EGE253J7.js";import{a as je,b as Ie,c as ye,d as Te}from"./chunk-S2YMBQW3.js";import{$ as g,Ab as te,Cb as F,Da as le,Db as s,Dc as K,Ec as Se,Fb as P,G as a,Gb as A,H as u,Ib as x,Jb as S,Kb as ge,Lb as j,Nb as I,O as b,Oa as q,Ob as y,Pa as $,Pb as ve,Q as l,Qb as Ce,Sa as me,U as i,V as n,W as p,X as M,Y as O,Ya as z,Za as pe,_ as V,_a as H,_b as T,a as C,aa as f,b as h,cb as oe,da as Z,ia as re,ja as m,k as R,ka as d,la as ee,n as v,nb as se,o as B,oc as he,pc as _e,qc as w,rc as Fe,sa as ne,sc as N,t as L,tc as Pe,u as D,uc as E}from"./chunk-2KVP733G.js";var Q=class r{etapas=[{label:"Plano",routerLink:"plano"},{label:"Objetivos",routerLink:"objetivos"}];static \u0275fac=function(o){return new(o||r)};static \u0275cmp=v({type:r,selectors:[["app-cadastro-plano-acao"]],decls:3,vars:2,consts:[[1,"cadastro-plano-acao"],[3,"model","readonly"]],template:function(o,t){o&1&&(i(0,"div",0),p(1,"p-steps",1)(2,"router-outlet"),n()),o&2&&(a(),l("model",t.etapas)("readonly",!1))},dependencies:[pe,ye],styles:[".cadastro-plano-acao[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:1rem}"]})};var Ne=h(C({},E),{labels:{titulo:"T\xEDtulo",descricao:"Descri\xE7\xE3o",dataInicio:"Data de in\xEDcio",dataTermino:"Data de t\xE9rmino",status:"Status"},placeholders:{titulo:"Digite o t\xEDtulo",descricao:"Digite a descri\xE7\xE3o",dataInicio:"DD/MM/AAAA",dataTermino:"DD/MM/AAAA",status:"Selecione o status"}});var U=class r{constructor(e,o,t,c){this.formBuilder=e;this.router=o;this.route=t;this.planoAcaoService=c;this.createForm(),this.obtemStatus()}planoForm;status;planoFormConfig=Ne;buscaPlanoSalva(){if(this.planoAcaoService.getPlano()){let e=new _;e.map(this.planoAcaoService.getPlano()),this.atualizaFormulario(e)}}createForm(){this.planoForm=this.formBuilder.group({titulo:["",s.compose([s.required,s.maxLength(this.planoFormConfig.maxLengths.padrao)])],descricao:["",s.maxLength(this.planoFormConfig.maxLengths.longo)],dataInicio:["",s.required],dataTermino:["",s.required],status:["",s.required]})}atualizaFormulario(e){Object.keys(this.planoForm.controls).forEach(o=>{if(e[o])switch(o){case"status":this.planoForm.get(o).setValue(e[o].id);break;default:this.planoForm.get(o).setValue(e[o]);break}})}obtemStatus(){this.status=fe.getStatus(),console.log(this.status)}desabilitaAvancar(){return this.planoForm.invalid}avancar(){let e=new _;e.map(this.planoForm.getRawValue()),this.planoAcaoService.salvaPlano(e),this.router.navigate(["..","objetivos"],{relativeTo:this.route})}static \u0275fac=function(o){return new(o||r)(u(y),u(H),u(z),u(J))};static \u0275cmp=v({type:r,selectors:[["app-plano-acao"]],decls:26,vars:13,consts:[[3,"formGroup"],[1,"form-row","form-row--margin"],[1,"p-fluid",2,"width","100%"],["pInputText","","id","titulo","formControlName","titulo",3,"placeholder","maxlength"],["for","titulo"],["pInputText","","id","descricao","formControlName","descricao",3,"placeholder","maxlength"],["for","descricao"],["formControlName","dataInicio","inputId","dataInicio"],["for","dataInicio"],["formControlName","dataTermino","inputId","dataTermino"],["for","dataTermino"],["formControlName","status","optionLabel","descricao","optionValue","id","id","status",3,"options","placeholder"],["for","status"],[1,"form_buttons"],["label","Pr\xF3ximo","icon","pi pi-arrow-right","iconPos","right",1,"form_buttons_avancar",3,"onClick","disabled"]],template:function(o,t){o&1&&(i(0,"form",0)(1,"div",1)(2,"p-floatLabel",2),p(3,"input",3),i(4,"label",4),m(5),n()()(),i(6,"div",1)(7,"p-floatLabel",2),p(8,"input",5),i(9,"label",6),m(10),n()()(),i(11,"div",1)(12,"p-floatLabel",2),p(13,"p-calendar",7),i(14,"label",8),m(15),n()(),i(16,"p-floatLabel",2),p(17,"p-calendar",9),i(18,"label",10),m(19),n()(),i(20,"p-floatLabel",2),p(21,"p-dropdown",11),i(22,"label",12),m(23),n()()(),i(24,"div",13)(25,"p-button",14),g("onClick",function(){return t.avancar()}),n()()()),o&2&&(l("formGroup",t.planoForm),a(3),l("placeholder",t.planoFormConfig.placeholders.titulo)("maxlength",t.planoFormConfig.maxLengths.padrao),a(2),d(t.planoFormConfig.labels.titulo),a(3),l("placeholder",t.planoFormConfig.placeholders.descricao)("maxlength",t.planoFormConfig.maxLengths.longo),a(2),d(t.planoFormConfig.labels.descricao),a(5),d(t.planoFormConfig.labels.dataInicio),a(4),d(t.planoFormConfig.labels.dataTermino),a(2),l("options",t.status)("placeholder",t.planoFormConfig.placeholders.status),a(2),d(t.planoFormConfig.labels.status),a(2),l("disabled",t.desabilitaAvancar()))},dependencies:[x,F,P,A,I,S,j,N,w,he,T,K]})};var ie=h(C({},E),{labels:{titulo:"T\xEDtulo do objetivo"},placeholders:{titulo:"Digite o t\xEDtulo"}});var Oe=h(C({},E),{labels:{titulo:"T\xEDtulo do problema",descricao:"Descri\xE7\xE3o",resultado:"Resultado",etapa:"Etapa",possuiCausa:"Possui causa?",prioridade:"Prioridade",categoria:"Categoria"},placeholders:{titulo:"Digite o t\xEDtulo",descricao:"Digite a descri\xE7\xE3o",resultado:"Digite o resultado",etapa:"Selecione a etapa",possuiCausa:"",prioridade:"Selecione a prioridade",categoria:"Selecione a categoria"}});var Be=()=>({"min-width":"50rem"});function qe(r,e){if(r&1&&(i(0,"th"),m(1),n()),r&2){let o=e.$implicit;a(),ee(" ",o.header," ")}}function $e(r,e){if(r&1&&(i(0,"tr"),b(1,qe,2,1,"th",27),n()),r&2){let o=e.$implicit;a(),l("ngForOf",o)}}function ze(r,e){if(r&1&&(i(0,"span"),m(1),n()),r&2){let o=f().$implicit,t=f().$implicit;a(),ee(" ",t[o.field]," ")}}function He(r,e){if(r&1){let o=V();i(0,"span")(1,"p-button",29),g("onClick",function(){L(o);let c=f(2).$implicit,k=f(2);return D(k.removeProblema(c))}),n()()}r&2&&(a(),l("text",!0)("rounded",!0)("plain",!0))}function Je(r,e){if(r&1&&(i(0,"td"),b(1,ze,2,1,"span",28)(2,He,2,3,"span",28),n()),r&2){let o=e.$implicit;a(),l("ngIf",!!o.field),a(),l("ngIf",!!o.action)}}function Ke(r,e){if(r&1&&(i(0,"tr"),b(1,Je,3,2,"td",27),n()),r&2){let o=e.columns;a(),l("ngForOf",o)}}function Qe(r,e){if(r&1&&(M(0),i(1,"p-table",24),b(2,$e,2,1,"ng-template",25)(3,Ke,2,1,"ng-template",26),n(),O()),r&2){let o=f();a(),l("columns",o.columns)("value",o.problemas)("tableStyle",ne(3,Be))}}function Ue(r,e){r&1&&(i(0,"p"),m(1,"Nenhum problema cadastrado at\xE9 o momento."),n())}var W=class r{constructor(e){this.formBuilder=e;this.createForm(),this.getInfosForm()}problemaForm;etapas;prioridades;categorias;problemas=[];problemaFormConfig=Oe;possuiCausa=[{value:!0,label:"Sim"},{value:!1,label:"N\xE3o"}];columns=[{field:"titulo",header:this.problemaFormConfig.labels.titulo,action:!1},{field:"etapa.descricao",header:this.problemaFormConfig.labels.etapa,action:!1},{field:"possuiCausa",header:this.problemaFormConfig.labels.possuiCausa,action:!1},{field:"resultado",header:this.problemaFormConfig.labels.resultado,action:!1},{field:"prioridade.descricao",header:this.problemaFormConfig.labels.prioridade,action:!1},{field:"categoria.descricao",header:this.problemaFormConfig.labels.categoria,action:!1},{field:"",header:"",action:!0}];getInfosForm(){this.etapas=de.getEtapa(),this.prioridades=ue.getPrioridades(),this.categorias=ce.getCategoria()}createForm(){this.problemaForm=this.formBuilder.group({titulo:["",s.required],descricao:[""],resultado:[""],etapa:["",s.required],possuiCausa:["",s.required],prioridade:["",s.required],categoria:["",s.required]})}removeProblema(e){if(!e||!this.problemas||this.problemas.length<=0)return;let o=this.problemas.findIndex(t=>t.id==e.id);o!=-1&&this.problemas.splice(o,1)}habilitaCadastroProblema(){return this.problemaForm.valid}adicionaProblema(){this.habilitaCadastroProblema()&&(this.problemas.push(new be(this.problemaForm.getRawValue())),console.log(this.problemas))}possuiProblemas(){return!!this.problemas&&this.problemas.length>0}static \u0275fac=function(o){return new(o||r)(u(y))};static \u0275cmp=v({type:r,selectors:[["app-problema-plano-acao"]],decls:42,vars:25,consts:[["naoPossuiProblemasTemplate",""],[1,"problema-container"],[1,"problema-title"],[3,"formGroup"],[1,"form-row","form-row--margin"],[1,"p-fluid",2,"width","100%"],["pInputText","","id","titulo","formControlName","titulo",3,"placeholder","maxlength"],["for","titulo"],["formControlName","prioridade","optionLabel","descricao","optionValue","id","id","prioridade",3,"options","placeholder"],["for","prioridade"],["formControlName","categoria","optionLabel","descricao","optionValue","id","id","categoria",3,"options","placeholder"],["for","categoria"],["id","descricao","formControlName","descricao","rows","3","cols","30","pInputTextarea","",3,"placeholder","maxlength"],["for","descricao"],["pInputText","","id","resultado","formControlName","resultado",3,"placeholder","maxlength"],["for","resultado"],["formControlName","etapa","optionLabel","descricao","optionValue","id","id","etapa",3,"options","placeholder"],["for","etapa"],["formControlName","possuiCausa","optionLabel","label","optionValue","value","id","possuiCausa",3,"options","placeholder"],["for","possuiCausa"],[1,"form_buttons"],["label","Adicionar problema","icon","pi pi-check","iconPos","left",1,"form_buttons_avancar",3,"onClick","disabled"],[1,"problemas_lista"],[4,"ngIf","ngIfElse"],[3,"columns","value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[4,"ngFor","ngForOf"],[4,"ngIf"],["icon","pi pi-trash",3,"onClick","text","rounded","plain"]],template:function(o,t){if(o&1){let c=V();i(0,"div",1)(1,"h3",2),m(2,"Problemas"),n(),i(3,"form",3)(4,"div",4)(5,"p-floatLabel",5),p(6,"input",6),i(7,"label",7),m(8),n()(),i(9,"p-floatLabel",5),p(10,"p-dropdown",8),i(11,"label",9),m(12),n()(),i(13,"p-floatLabel",5),p(14,"p-dropdown",10),i(15,"label",11),m(16),n()()(),i(17,"div",4)(18,"p-floatLabel",5)(19,"textarea",12),m(20,"                "),n(),i(21,"label",13),m(22),n()()(),i(23,"div",4)(24,"p-floatLabel",5),p(25,"input",14),i(26,"label",15),m(27),n()(),i(28,"p-floatLabel",5),p(29,"p-dropdown",16),i(30,"label",17),m(31),n()(),i(32,"p-floatLabel",5),p(33,"p-dropdown",18),i(34,"label",19),m(35),n()()(),i(36,"div",20)(37,"p-button",21),g("onClick",function(){return L(c),D(t.adicionaProblema())}),n()()(),i(38,"div",22),b(39,Qe,4,4,"ng-container",23)(40,Ue,2,0,"ng-template",null,0,le),n()()}if(o&2){let c=re(41);a(3),l("formGroup",t.problemaForm),a(3),l("placeholder",t.problemaFormConfig.placeholders.titulo)("maxlength",t.problemaFormConfig.maxLengths.padrao),a(2),d(t.problemaFormConfig.labels.titulo),a(2),l("options",t.prioridades)("placeholder",t.problemaFormConfig.placeholders.prioridade),a(2),d(t.problemaFormConfig.labels.prioridade),a(2),l("options",t.categorias)("placeholder",t.problemaFormConfig.placeholders.categoria),a(2),d(t.problemaFormConfig.labels.categoria),a(3),l("placeholder",t.problemaFormConfig.placeholders.descricao)("maxlength",t.problemaFormConfig.maxLengths.longo),a(3),d(t.problemaFormConfig.labels.descricao),a(3),l("placeholder",t.problemaFormConfig.placeholders.resultado)("maxlength",t.problemaFormConfig.maxLengths.padrao),a(2),d(t.problemaFormConfig.labels.resultado),a(2),l("options",t.etapas)("placeholder",t.problemaFormConfig.placeholders.etapa),a(2),d(t.problemaFormConfig.labels.etapa),a(2),l("options",t.possuiCausa)("placeholder",t.problemaFormConfig.placeholders.possuiCausa),a(2),d(t.problemaFormConfig.labels.possuiCausa),a(2),l("disabled",!t.habilitaCadastroProblema()),a(2),l("ngIf",t.possuiProblemas())("ngIfElse",c)}},dependencies:[q,$,x,F,P,A,I,S,j,N,w,se,T,K,je,Ae],styles:[".problema-container[_ngcontent-%COMP%]{background-color:#f9fafb;border:1px solid #d1d5db;border-top:0;border-bottom-left-radius:6px;border-bottom-right-radius:6px;padding:1rem}.problema-title[_ngcontent-%COMP%]{margin-top:0}"]})};function Xe(r,e){if(r&1){let o=V();i(0,"p-button",11),g("onClick",function(){L(o);let c=f().index,k=f();return D(k.removeObjetivo(c))}),n()}r&2&&l("text",!0)("rounded",!0)("plain",!0)}function Ye(r,e){if(r&1&&(M(0),i(1,"div",6)(2,"p-floatLabel",7),p(3,"input",8),i(4,"label",9),m(5),n()(),b(6,Xe,1,3,"p-button",10),n(),p(7,"app-problema-plano-acao"),O()),r&2){let o=e.$implicit,t=e.index,c=f();a(),l("formGroup",o),a(2),Z("id","titulo",t+1,""),l("placeholder",c.objetivoFormConfig.placeholders.titulo)("maxlength",c.objetivoFormConfig.maxLengths.curto),a(),Z("for","titulo",t+1,""),a(),d(c.objetivoFormConfig.labels.titulo),a(),l("ngIf",c.exibeBotaoRemoverObjetivo())}}var X=class r{constructor(e,o,t,c){this.formBuilder=e;this.router=o;this.route=t;this.planoAcaoService=c;this.createForm()}objetivoForm;objetivoFormConfig=ie;createForm(){this.objetivoForm=this.formBuilder.group({objetivos:this.formBuilder.array([])}),this.adicionaObjetivo(),this.buscaPlanoSalvo()}buscaPlanoSalvo(){if(this.planoAcaoService.getPlanos()){let e=new _;e.map(this.planoAcaoService.getPlanos()),this.atualizaFormulario(e)}}atualizaFormulario(e){if(!(!e||!e.objetivos)&&e.objetivos&&e.objetivos.length>0)for(let o=0;o<e.objetivos.length;o++)o==0?this.objetivos.at(0).get("titulo").setValue(e.objetivos[0].titulo):this.adicionaObjetivo(e.objetivos[o])}get objetivos(){return this.objetivoForm.get("objetivos")}adicionaObjetivo(e){this.objetivos.push(this.formBuilder.group({titulo:[e?e.titulo:"",s.compose([s.required,s.maxLength(ie.maxLengths.curto)])]}))}exibeBotaoRemoverObjetivo(){return this.objetivos.length>1}removeObjetivo(e){this.objetivos&&this.objetivos.length>0&&this.objetivos.removeAt(e)}desabilitaAvancar(){return this.objetivoForm.invalid}getDadosForm(){let e=this.objetivoForm.getRawValue();return e.telefones=e.telefones.map(o=>o.telefone),e}avancar(){let e=new _;e.mapObjetivos(this.getDadosForm()),this.planoAcaoService.salvaPlano(e),this.router.navigate(["..","acoes"],{relativeTo:this.route})}static \u0275fac=function(o){return new(o||r)(u(y),u(H),u(z),u(J))};static \u0275cmp=v({type:r,selectors:[["app-objetivos-plano-acao"]],decls:6,vars:6,consts:[[1,"form",3,"formGroup"],["formArrayName","objetivos"],[4,"ngFor","ngForOf"],["icon","pi pi-plus","label","Adicionar outro objetivo",1,"mr-2",3,"onClick","rounded","text","plain"],[1,"form_buttons"],["label","Pr\xF3ximo","icon","pi pi-arrow-right","iconPos","right",1,"form_buttons_avancar",3,"onClick","disabled"],[1,"form-row","form-row--margin","form-row--direction",3,"formGroup"],[1,"p-fluid",2,"width","100%"],["pInputText","","formControlName","titulo",3,"id","placeholder","maxlength"],[3,"for"],["icon","pi pi-times",3,"text","rounded","plain","onClick",4,"ngIf"],["icon","pi pi-times",3,"onClick","text","rounded","plain"]],template:function(o,t){o&1&&(i(0,"form",0),M(1,1),b(2,Ye,8,9,"ng-container",2),O(),i(3,"p-button",3),g("onClick",function(){return t.adicionaObjetivo()}),n(),i(4,"div",4)(5,"p-button",5),g("onClick",function(){return t.avancar()}),n()()()),o&2&&(l("formGroup",t.objetivoForm),a(2),l("ngForOf",t.objetivos.controls),a(),l("rounded",!0)("text",!0)("plain",!0),a(2),l("disabled",t.desabilitaAvancar()))},dependencies:[q,$,x,F,P,A,I,S,j,ge,N,w,T,W],styles:[".form-row[_ngcontent-%COMP%]{margin-bottom:0}"]})};var Ze=[{path:"",redirectTo:"cadastro",pathMatch:"full"},{path:"cadastro",component:Q,children:[{path:"",redirectTo:"plano",pathMatch:"full"},{path:"plano",component:U,canActivate:[te]},{path:"objetivos",component:X,canActivate:[te]}]}],Y=class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=B({type:r});static \u0275inj=R({imports:[oe.forChild(Ze),oe]})};var Ve=class r{static \u0275fac=function(o){return new(o||r)};static \u0275mod=B({type:r});static \u0275inj=R({imports:[me,Y,ve,Ce,Pe,Fe,_e,Se,Te,Ie,xe]})};export{Ve as PlanoAcaoModule};
