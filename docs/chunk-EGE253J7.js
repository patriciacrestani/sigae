import{$ as G,B as x,Eb as R,Ga as j,H as n,Ha as z,Hb as F,N as A,R as D,Sa as B,j as C,k as S,kb as M,l as P,o as y,p as I,qb as c,rb as l,sb as w,y as E,yb as o,zb as N}from"./chunk-2KVP733G.js";var $=(()=>{class i{el;ngModel;control;cd;config;autoResize;variant="outlined";onResize=new E;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;constructor(t,r,s,v,b){this.el=t,this.ngModel=r,this.control=s,this.cd=v,this.config=b}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(t){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(t){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(t||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}static \u0275fac=function(r){return new(r||i)(n(x),n(F,8),n(R,8),n(j),n(M))};static \u0275dir=I({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:6,hostBindings:function(r,s){r&1&&G("input",function(b){return s.onInput(b)}),r&2&&D("p-filled",s.filled)("p-inputtextarea-resizable",s.autoResize)("p-variant-filled",s.variant==="filled"||s.config.inputStyle()==="filled")},inputs:{autoResize:[2,"autoResize","autoResize",z],variant:"variant"},outputs:{onResize:"onResize"},features:[A]})}return i})(),_=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=y({type:i});static \u0275inj=S({imports:[B]})}return i})();var p=class{static Saude=1;static Financeiro=2;static Profissional=3;static getDescricoesCategoriaPlanoAcao(){return{1:"Sa\xFAde",2:"Financeiro",3:"Profissional"}}static getDescricaoCategoriaById(e){return this.getDescricoesCategoriaPlanoAcao()[e]}static getCategoria(){return a.mapList([{id:1,descricao:"Sa\xFAde"},{id:2,descricao:"Financeiro"},{id:3,descricao:"Profissional"}])}};var u=class{static Pendente=1;static EmAndamento=2;static Concluido=3;static getDescricoesEtapaPlanoAcao(){return{1:"Pendente",2:"Em andamento",3:"Conclu\xEDdo"}}static getDescricaoEtapaById(e){return this.getDescricoesEtapaPlanoAcao()[e]}static getEtapa(){return a.mapList([{id:1,descricao:"Pendente"},{id:2,descricao:"Em andamento"},{id:3,descricao:"Conclu\xEDdo"}])}};var d=class{static Baixa=1;static Media=2;static Alta=3;static getDescricoesPrioridadePlanoAcao(){return{1:"Baixa",2:"M\xE9dia",3:"Alta"}}static getDescricaoPrioridadeById(e){return this.getDescricoesPrioridadePlanoAcao()[e]}static getPrioridades(){return a.mapList([{id:1,descricao:"Baixa"},{id:2,descricao:"M\xE9dia"},{id:3,descricao:"Alta"}])}};var a=class extends o{descricao;constructor(e){e&&(super(e),this.preenchePropriedades(e))}map(e){e&&this.preenchePropriedades(e)}static mapList(e){return!e||!Array.isArray(e)||e.length<=0?[new this]:e.map(t=>new this(t))}mapeiaEtapa(e){if(e)switch(typeof e){case"object":super.map(e);break;default:this.id=e,this.descricao=u.getDescricaoEtapaById(e);break}}mapeiaPrioridade(e){if(e)switch(typeof e){case"object":super.map(e);break;default:this.id=e,this.descricao=d.getDescricaoPrioridadeById(e);break}}mapeiaCategoria(e){if(e)switch(typeof e){case"object":super.map(e);break;default:this.id=e,this.descricao=p.getDescricaoCategoriaById(e);break}}mapeiaStatus(e){if(e)switch(typeof e){case"object":super.map(e);break;default:this.id=e,this.descricao=m.getDescricaoStatusById(e);break}}};var m=class{static Pendente=1;static EmAndamento=2;static Concluido=3;static getDescricoesStatusPlanoAcao(){return{1:"Pendente",2:"Em andamento",3:"Conclu\xEDdo"}}static getDescricaoStatusById(e){return this.getDescricoesStatusPlanoAcao()[e]}static getStatus(){return a.mapList([{id:1,descricao:"Pendente"},{id:2,descricao:"Em andamento"},{id:3,descricao:"Conclu\xEDdo"}])}};var h=class extends o{titulo;descricao;resultado;etapa;possuiCausa;prioridade;categoria;constructor(e){super(),this.id=e.id,this.titulo=e.titulo,this.descricao=e.descricao,this.resultado=e.resultado,this.etapa=new a(e.etapa),this.etapa.mapeiaEtapa(e.etapa),this.possuiCausa=e.possuiCausa,this.prioridade=new a,this.prioridade.mapeiaPrioridade(e.prioridade),this.categoria=new a,this.categoria.mapeiaCategoria(e.categoria)}};var g=class extends o{titulo;problemas;map(e){e&&(super.map(e),e.problemas&&e.problemas.length>0&&(this.problemas=h.mapList(e.problemas)))}};var f=class extends o{titulo;descricao;dataInicio;dataTermino;status;objetivos;mapObjetivos(e){e&&(this.objetivos=g.mapList(e))}};var L=c("[Plano] Add Plano",l()),O=c("[Plano] Update Plano",l()),k=c("[Plano] Delete Plano",l());var H=class i{constructor(e,t){this.store=e;this.localStorageService=t}static NovoPlanoKey="NOVO_PLANO_KEY";getPlanos(){let e=[];return this.store.select("planos").subscribe(t=>{e=t.planos}),e}getPlanoById(e){let t=[];return this.store.select("planos").subscribe(r=>{t=r.planos}),t.find(r=>r.id==e)}carregaPlano(e){this.removePlano();let t=this.getPlanoById(e);this.salvaPlano(t)}getNextId(){let e=this.getPlanos();return e.length>0?e[e.length-1].id+1:1}getPlano(){return this.localStorageService.getItem(i.NovoPlanoKey)}getPlanoAtualizada(e){let t=new f;return this.getPlano()&&t.preenchePropriedades(this.getPlano()),t.preenchePropriedades(e),t}salvaPlano(e){let t=this.getPlanoAtualizada(e);this.localStorageService.setItem(i.NovoPlanoKey,t)}salvaPlanoState(e){let t=this.getPlanoAtualizada(e);t.id?this.editaPlano(t):(t.setId(this.getNextId()),this.cadastraPlano(t)),this.removePlano()}editaPlano(e){this.store.dispatch(O({plano:e}))}cadastraPlano(e){this.store.dispatch(L({plano:e}))}excluirPlano(e){this.store.dispatch(k({id:e}))}removePlano(){this.localStorageService.removeItem(i.NovoPlanoKey)}static \u0275fac=function(t){return new(t||i)(P(w),P(N))};static \u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})};export{p as a,u as b,d as c,m as d,h as e,f,L as g,O as h,k as i,H as j,$ as k,_ as l};
